# 기본적인 리팩터링

## 함수 추출하기

코드 내용을 찾아 어떤 일을 하는지 파악한 후 독립된 별도의 함수로 추출한다음 목적에 맞는 이름으로 작성한다.

#### 추출 규칙

* 함수 하나가 한 화면을 넘어가서는 안됨
* 함수의 재사용성 \(2번 이상 사용 예정\)
* 코드의 맥락을 보고 무슨 일을 하는 함수인지 한참 걸리면 안됨

"목적과 구현의 분리" 를 하는 것이 중요  
함수를 많이 작성할 수록 프로그램이 느려진다 \(x\) -&gt; 함수가 짧으면 컴파일러가 캐싱하기 쉬움. 즉, 성능 최적화에 유리한 면이 있음.

값을 반환할 변수가 여러개라면? 여러 함수로 만드는 것이 가독성이 좋다.

단 한줄의 기능이라도 의미 있는 이름의 함수로 전달하면 코드 가독성이 높아진다.

**함수 추출하기 절차**

1. 이름을 잘 짓는다. \(뭘 하는지 명확해야 함\)
2. 함수화 할 코드를 새 함수에 Copy & Paste
3. 함수의 유효범위를 벗어나는 변수를 확인 이는 인자로 전달
4. 함수 작성 완료. 컴파일 한다.
5. 테스트 한다.

## 함수 인라인 하기

1. 다형성의 특성이 있는 메서드는 인라인하지 않는다.
2. 인라인 할 함수를 선정한다.
3. 각 호출문을 인라인하고 함수 호출을 인라인으로 변경한다.
4. 3번 항목을 할 때마다 테스트 한다.

## 변수 추출하기

한줄에 작성한 복잡한 표현식은 스텝 바이 스텝으로 나누는 것이 좋다. breakpoint 를 잡기 어렵게 되고 표현식을 쪼개어 의미있는 값은 변수 처리하는 것이 좋다. \(여러 곳에 의미 있는 표현식이라면 함수로 추출한다\)

## 함수 선언 바꾸기

함수 선언 바꾸기에는 '간단한 절차', '마이그레이션 절차' 두가지가 있다.

간단한 절차는 매개변수를 수정 또는 제거 할 때, 인자가 함수 내부에서 참조하는 곳이 없도록 수정한 후 함수 선언을 원하는 형태로 바꾸는 것이다. 변경할 곳이 많으면 함수를 여러개로 나눠서 처리하는 것이 좋다.

마이그레이션 절차는 함수를 추출할 때, 먼저 적절하게 리팩터링 한다. 이후 함수를 추출한다. 매개 변수를 추가 해야 한다면, '간단한 절차' 를 따른 후, 테스트를 진행한다.











